<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Higher Number Game</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      text-align: center;
      overflow: hidden;
    }
    #score {
      font-size: 5vw; /* responsive text */
      margin: 10px;
    }
    .ball {
      position: absolute;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      color: white;
      user-select: none;
      animation: fall 6s linear forwards;

      /* responsive sizing */
      width: 15vw;
      height: 15vw;
      max-width: 100px;
      max-height: 100px;
      min-width: 60px;
      min-height: 60px;
      font-size: 6vw;
      max-font-size: 28px;
    }
    @keyframes fall {
      from { top: -120px; }
      to { top: 100vh; }
    }
  </style>
</head>
<body>
  <div id="score">Score: 0</div>

  <script>
    let score = 0;
    let roundActive = false;
    let currentBalls = [];

    function updateScore(points) {
      score += points;
      document.getElementById("score").textContent = "Score: " + score;
    }

    function spawnBalls() {
      if (roundActive) return;
      roundActive = true;

      // remove leftover
      currentBalls.forEach(ball => ball.remove());
      currentBalls = [];

      // two unique numbers
      let num1 = Math.floor(Math.random() * 10);
      let num2;
      do {
        num2 = Math.floor(Math.random() * 10);
      } while (num2 === num1);

      const higher = Math.max(num1, num2);
      const lower = Math.min(num1, num2);
      const diff = higher - lower;

      // create 2 balls in left/right halves
      const ball1 = createBall(num1, "left");
      const ball2 = createBall(num2, "right");
      currentBalls.push(ball1, ball2);

      function endRound(choice) {
        if (choice !== null) {
          if (choice === higher) updateScore(diff);
          else updateScore(-diff);
        }
        currentBalls.forEach(ball => ball.remove());
        currentBalls = [];
        roundActive = false;
        setTimeout(spawnBalls, 800);
      }

      // click & touch listeners
      [ball1, ball2].forEach(ball => {
        const handler = () => {
          if (!roundActive) return;
          endRound(parseInt(ball.textContent));
        };
        ball.addEventListener("click", handler);
        ball.addEventListener("touchstart", handler, {passive:true});
      });

      // auto remove when fall completes
      currentBalls.forEach(ball => {
        ball.addEventListener("animationend", () => {
          if (roundActive) {
            endRound(null);
          }
        });
      });
    }

    function createBall(value, side) {
      const ball = document.createElement("div");
      ball.className = "ball";
      ball.textContent = value;

      const halfWidth = window.innerWidth / 2 - 120; // safe zone for ball size

      if (side === "left") {
        ball.style.left = Math.random() * halfWidth + "px";
      } else {
        ball.style.left = (window.innerWidth / 2) + Math.random() * halfWidth + "px";
      }

      // random color
      const colors = [
        "#e74c3c", "#3498db", "#2ecc71", "#9b59b6",
        "#f39c12", "#1abc9c", "#e67e22", "#ff69b4"
      ];
      const color = colors[Math.floor(Math.random() * colors.length)];
      ball.style.background = `radial-gradient(circle at 30% 30%, ${color}, #000)`;

      document.body.appendChild(ball);
      return ball;
    }

    // start game
    spawnBalls();

    // resize fix for responsiveness
    window.addEventListener("resize", () => {
      currentBalls.forEach(ball => ball.remove());
      currentBalls = [];
      roundActive = false;
      spawnBalls();
    });
  </script>
</body>
</html>
